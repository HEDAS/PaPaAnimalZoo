var __reflect=this&&this.__reflect||function(e,n,t){e.__class__=n,t?t.push(n):t=[n],e.__types__=e.__types__?t.concat(e.__types__):t},__extends=this&&this.__extends||function(e,n){function t(){this.constructor=e}for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a]);e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)},AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,n,t){function a(a){n.call(t,a,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?a(i):RES.getResAsync(e,a,this)}else RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ClassUI=function(e){function n(){var n=e.call(this)||this;return n.addEventListener(eui.UIEvent.COMPLETE,n.uiCompHandler,n),n.skinName="resource/custom_skins/bottomIcon/classUISkin.exml",n}return __extends(n,e),n.prototype.uiCompHandler=function(){var e=this;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.dispatchEventWith(GameEvents.EVT_CLOSE_CLASS)},this);var n=[{icon:"animalNormal1_1_png",name:"兔毛剪初级",func:"所有动物战力+10",learn:"学习"},{icon:"animalNormal1_2_png",name:"刺木超人初级",func:"所有动物战力+12",learn:"学习"},{icon:"animalNormal1_3_png",name:"力量泡面初级",func:"所有动物战力+15",learn:"学习"},{icon:"animalNormal1_4_png",name:"乌龟壳初级",func:"所有动物战力+18",learn:"学习"},{icon:"animalNormal1_5_png",name:"笑面犬初级",func:"所有动物战力+22",learn:"学习"},{icon:"animalNormal2_1_png",name:"魔力步伐初级",func:"所有动物战力+26",learn:"学习"},{icon:"animalNormal2_2_png",name:"猕猴掏初级",func:"所有动物战力+31",learn:"学习"},{icon:"animalNormal2_3_png",name:"大黑羊初级",func:"所有动物战力+37",learn:"学习"},{icon:"animalNormal2_4_png",name:"慢慢拳初级",func:"所有动物战力+45",learn:"学习"},{icon:"animalNormal2_5_png",name:"灰天马初级",func:"所有动物战力+54",learn:"学习"},{icon:"animalNormal3_1_png",name:"狐狸挠初级",func:"所有动物战力+64",learn:"学习"},{icon:"animalNormal3_2_png",name:"播种艺术初级",func:"所有动物战力+77",learn:"学习"},{icon:"animalNormal3_3_png",name:"百宝袋初级",func:"所有动物战力+93",learn:"学习"},{icon:"animalNormal3_4_png",name:"牛角尖初级",func:"所有动物战力+111",learn:"学习"},{icon:"animalNormal3_5_png",name:"性感双唇初级",func:"所有动物战力+134",learn:"学习"},{icon:"animalNormal4_1_png",name:"左勾拳初级",func:"所有动物战力+160",learn:"学习"},{icon:"animalNormal4_2_png",name:"狼来了初级",func:"所有动物战力+139",learn:"学习"},{icon:"animalNormal4_3_png",name:"皮糙肉厚初级",func:"所有动物战力+231",learn:"学习"},{icon:"animalNormal4_4_png",name:"落宝金钱初级",func:"所有动物战力+277",learn:"学习"},{icon:"animalNormal4_5_png",name:"犀甲初级",func:"所有动物战力+332",learn:"学习"}];this.listClass1.dataProvider=new eui.ArrayCollection(n),this.listClass1.itemRenderer=ClassListIRSkin1;var t=[{icon:"animalSpecial1_5_png",name:"超级凶",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal2_1_png",name:"黄金便便",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal2_2_png",name:"淘气",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal2_3_png",name:"绵羊音",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal2_4_png",name:"心灵感应",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal2_5_png",name:"声扰免疫",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal3_1_png",name:"灵性",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal3_2_png",name:"铁獠牙",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal3_3_png",name:"善心",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal3_4_png",name:"催奶秘技",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal3_5_png",name:"健身操",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal4_1_png",name:"特训计划",func:"所有动物秒产量+3%",learn:"学习"},{icon:"animalNormal4_2_png",name:"30点能量",func:"所有动物秒产量+3%",learn:"学习"}];this.listClass2.dataProvider=new eui.ArrayCollection(t),this.listClass2.itemRenderer=ClassListIRSkin2},n.prototype.createChildren=function(){e.prototype.createChildren.call(this)},n}(eui.Component);__reflect(ClassUI.prototype,"ClassUI");var ClassListIRSkin1=function(e){function n(){var n=e.call(this)||this;return n.skinName="resource/custom_skins/bottomIcon/classListIRSkin.exml",n}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this)},n.prototype.dataChanged=function(){},n}(eui.ItemRenderer);__reflect(ClassListIRSkin1.prototype,"ClassListIRSkin1");var ClassListIRSkin2=function(e){function n(){var n=e.call(this)||this;return n.skinName="resource/custom_skins/bottomIcon/classListIRSkin.exml",n}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this)},n.prototype.dataChanged=function(){},n}(eui.ItemRenderer);__reflect(ClassListIRSkin2.prototype,"ClassListIRSkin2");var MonthCardUI=function(e){function n(){var n=e.call(this)||this;return n.addEventListener(eui.UIEvent.COMPLETE,n.uiCompHandler,n),n.skinName="resource/custom_skins/leftIcon/monthCardUISkin.exml",n}return __extends(n,e),n.prototype.uiCompHandler=function(){var e=this;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.dispatchEventWith(GameEvents.EVT_CLOSE_MONTHCARD)},this)},n}(eui.Component);__reflect(MonthCardUI.prototype,"MonthCardUI");var OneYuanUI=function(e){function n(){var n=e.call(this)||this;return n.addEventListener(eui.UIEvent.COMPLETE,n.uiCompHandler,n),n.skinName="resource/custom_skins/leftIcon/oneYuanUISkin.exml",n}return __extends(n,e),n.prototype.uiCompHandler=function(){var e=this;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.dispatchEventWith(GameEvents.EVT_CLOSE_ONEYUAN)},this)},n}(eui.Component);__reflect(OneYuanUI.prototype,"OneYuanUI");var RecruitUI=function(e){function n(){var n=e.call(this)||this;return n.addEventListener(eui.UIEvent.COMPLETE,n.uiCompHandler,n),n.skinName="resource/custom_skins/bottomIcon/recruitUISkin.exml",n}return __extends(n,e),n.prototype.uiCompHandler=function(){var e=this;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.dispatchEventWith(GameEvents.EVT_CLOSE_RECRUIT)},this);var n=[{icon:"animalNormal1_1_png",name:"兔奶白",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal1_2_png",name:"刺太郎",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal1_3_png",name:"干脆熊",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal1_4_png",name:"毛虫龟",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal1_5_png",name:"田狗蛋",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal2_1_png",name:"朝阳鹿",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal2_2_png",name:"窜天猴",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal2_3_png",name:"黑羊羊",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal2_4_png",name:"懒媚娘",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal2_5_png",name:"灰隆马",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal3_1_png",name:"狐一菲",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal3_2_png",name:"朱坚强",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal3_3_png",name:"泡面熊",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal3_4_png",name:"牛尚天",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal3_5_png",name:"嘴猴王",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal4_1_png",name:"金腰袋",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal4_2_png",name:"飞太郎",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal4_3_png",name:"河泥马",num:"已招募100次",buy:"30.6K"},{icon:"animalNormal4_4_png",name:"小猎豹",num:"已招募100次",buy:"30.6K"}];this.listRecruit.dataProvider=new eui.ArrayCollection(n),this.listRecruit.itemRenderer=RecruitListIRSkin},n.prototype.createChildren=function(){e.prototype.createChildren.call(this)},n}(eui.Component);__reflect(RecruitUI.prototype,"RecruitUI");var RecruitListIRSkin=function(e){function n(){var n=e.call(this)||this;return n.skinName="resource/custom_skins/bottomIcon/recruitListIRSkin.exml",n}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this)},n.prototype.dataChanged=function(){},n}(eui.ItemRenderer);__reflect(RecruitListIRSkin.prototype,"RecruitListIRSkin");var ActionUI=function(e){function n(){var n=e.call(this)||this;return n._distance=new egret.Point,n._touchStatus=!1,n.addEventListener(eui.UIEvent.COMPLETE,n.uiCompHandler,n),n.skinName="resource/custom_skins/action.exml",n}return __extends(n,e),n.prototype.uiCompHandler=function(){var e=this;this.scene1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createScene,this),this.scene2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createScene,this),this.scene3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createScene,this),this.scene4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createScene,this),this.scene5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createScene,this),this.scene6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.createScene,this),this.scenes=[this.scene1,this.scene2,this.scene3,this.scene4,this.scene5,this.scene6],this.mainScene(1),this.mall.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e._mallUI=new MallUI,e._mallUI.addEventListener(GameEvents.EVT_CLOSE_MALL,function(){e.removeChild(e._mallUI)},e),e.addChild(e._mallUI)},this),this.oneYuan.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e._oneYuanUI=new OneYuanUI,e._oneYuanUI.addEventListener(GameEvents.EVT_CLOSE_ONEYUAN,function(){e.removeChild(e._oneYuanUI)},e),e.addChild(e._oneYuanUI)},this),this.monthCard.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e._monthCardUI=new MonthCardUI,e._monthCardUI.addEventListener(GameEvents.EVT_CLOSE_MONTHCARD,function(){e.removeChild(e._monthCardUI)},e),e.addChild(e._monthCardUI)},this),this.classroom.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e._classUI=new ClassUI,e._classUI.addEventListener(GameEvents.EVT_CLOSE_CLASS,function(){e.removeChild(e._classUI)},e),e.addChild(e._classUI)},this),this.recruit.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e._recruitUI=new RecruitUI,e._recruitUI.addEventListener(GameEvents.EVT_CLOSE_RECRUIT,function(){e.removeChild(e._recruitUI)},e),e.addChild(e._recruitUI)},this)},n.prototype.mainScene=function(e){this.animal.removeChildren(),this._currentScene=e,this.imgBg.source="bg"+e+"_jpg",this._sceneInfo=new GameAnimals;for(var n=1;n<=this._sceneInfo.howMany()[e-1].length-2;++n)for(var t=1;t<=this._sceneInfo.howMany()[e-1][n];++t){var a=this.createBitmapByName("animalNormal"+e+"_"+n+"_png");this.animal.addChild(a),a.x=Math.random()*(this.animal.width-.5*a.width),a.y=Math.random()*(this.animal.height-.5*a.height),a.scaleX=.5,a.scaleY=.5,a.name="animal"+n}this.sortGroup(this.animal),this.animal.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.animal.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this)},n.prototype.mouseDown=function(e){this._touchStatus=!0,this._touchTarget=this.getTouchTarget(e.stageX,e.stageY),this._touchTargetIndex=this.getTouchTargetIndex(e.stageX,e.stageY),void 0!=this._touchTarget&&(this._distance.x=e.localX-this._touchTarget.x,this._distance.y=e.localY-this._touchTarget.y),this.animal.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},n.prototype.mouseMove=function(e){this._touchStatus&&void 0!=this._touchTarget&&(this._touchTarget.x=e.localX-this._distance.x,this._touchTarget.y=e.localY-this._distance.y)},n.prototype.mouseUp=function(e){var n=this;if(this._touchStatus=!1,this.animal.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this),void 0!=this._touchTarget)for(var t=this.animal.getChildAt(this._touchTargetIndex),a=function(e){if(e!=i._touchTargetIndex){var a=i.animal.getChildAt(e);if(a.name==t.name){var o=i.animal.localToGlobal(a.x,a.y);if(t.hitTestPoint(o.x,o.y)||t.hitTestPoint(o.x+a.width*a.scaleX,o.y)||t.hitTestPoint(o.x,o.y+a.height*a.scaleY)||t.hitTestPoint(o.x+a.width*a.scaleX,o.y+a.height*a.scaleY)){i.animal.removeChild(t),i.animal.removeChild(a);var r=new egret.MovieClipDataFactory(RES.getRes("AnimalPaPa_json"),RES.getRes("AnimalPaPa_png"));return i.mc=new egret.MovieClip(r.generateMovieClipData("AnimalPaPa")),i.animal.addChild(i.mc),i.mc.x=a.x-50,i.mc.y=a.y-50,i.mc.addEventListener(egret.Event.COMPLETE,function(e){n.animal.removeChild(n.mc);var i=n.createBitmapByName("animalNormal"+n._currentScene+"_"+(parseInt(t.name.slice(6))+1)+"_png");n.animal.addChild(i),i.x=a.x,i.y=a.y,i.scaleX=.5,i.scaleY=.5,i.name="animal"+(parseInt(t.name.slice(6))+1)},i),i.mc.gotoAndPlay("ShowPaPa",1),"break"}}}},i=this,o=this.animal.numChildren-1;o>=0;--o){var r=a(o);if("break"===r)break}},n.prototype.getTouchTarget=function(e,n){for(var t=this.animal.numChildren-1;t>=0;--t)if(this.animal.getChildAt(t).hitTestPoint(e,n))return this.animal.getChildAt(t)},n.prototype.getTouchTargetIndex=function(e,n){for(var t=this.animal.numChildren-1;t>=0;--t)if(this.animal.getChildAt(t).hitTestPoint(e,n))return t},n.prototype.createScene=function(e){for(var n=0;n<this.scenes.length;++n)this.scenes[n]==e.currentTarget?(this.scenes[n].selected=!0,this.scenes[n].touchEnabled=!1,this.mainScene(n+1)):(this.scenes[n].selected=!1,this.scenes[n].touchEnabled=!0)},n.prototype.createBitmapByName=function(e){var n=new egret.Bitmap,t=RES.getRes(e);return n.texture=t,n},n.prototype.sortGroup=function(e){for(var n=[],t=0;t<e.numChildren;++t)n.push(e.getChildAt(t).y+e.getChildAt(t).height);for(var t=n.length-1;t>=0;--t){var a=e.getChildAt(n.indexOf(Math.max.apply(Math,n)));e.setChildIndex(a,t),n.splice(n.indexOf(Math.max.apply(Math,n)),1)}},n}(eui.Component);__reflect(ActionUI.prototype,"ActionUI");var MallUI=function(e){function n(){var n=e.call(this)||this;return n.addEventListener(eui.UIEvent.COMPLETE,n.uiCompHandler,n),n.skinName="resource/custom_skins/bottomIcon/mallUISkin.exml",n}return __extends(n,e),n.prototype.uiCompHandler=function(){var e=this;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.dispatchEventWith(GameEvents.EVT_CLOSE_MALL)},this);var n=[{icon:"mallIcon1_png",goods:"月卡（详情）",func:"30天尊贵特权",money:"¥ 28"},{icon:"mallIcon2_png",goods:"终身卡（详情）",func:"终生尊贵特权",money:"¥ 98"},{icon:"mallIcon3_png",goods:"30点能量",func:"购买终身卡可得38能量",money:"¥  6"},{icon:"mallIcon4_png",goods:"海量金币",func:"获得16.6G",money:"💎500"},{icon:"mallIcon5_png",goods:"600钻石",func:"赠送30钻石",money:"¥  6"},{icon:"mallIcon6_png",goods:"3000钻石",func:"赠送300钻石",money:"¥ 30"},{icon:"mallIcon7_png",goods:"6800钻石",func:"赠送900钻石",money:"¥ 68"},{icon:"mallIcon8_png",goods:"12800钻石",func:"赠送1900钻石",money:"¥ 128"},{icon:"mallIcon9_png",goods:"32800钻石",func:"赠送6000钻石",money:"¥ 328"},{icon:"mallIcon10_png",goods:"64800钻石",func:"赠送12900钻石",money:"¥ 648"}];this.listMall.dataProvider=new eui.ArrayCollection(n),this.listMall.itemRenderer=MallListIRSkin},n.prototype.createChildren=function(){e.prototype.createChildren.call(this)},n}(eui.Component);__reflect(MallUI.prototype,"MallUI");var MallListIRSkin=function(e){function n(){var n=e.call(this)||this;return n.skinName="resource/custom_skins/bottomIcon/mallListIRSkin.exml",n}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this)},n.prototype.dataChanged=function(){},n}(eui.ItemRenderer);__reflect(MallListIRSkin.prototype,"MallListIRSkin");var GameAnimals=function(){function e(){this.animals=[[16,5,3,2,2,1,13],[16,5,3,2,2,1,13],[16,5,3,2,2,1,13],[16,5,3,2,2,1,13],[16,1,1,1,1,1,1,14],[16,1,1,1,1,1,1,14]]}return e.prototype.howMany=function(){return this.animals},e.prototype.addAnimal=function(e,n){return this.animals[e-1][0]==this.animals[e-1][this.animals[e-1].length-1]?!1:(this.animals[e-1][n]++,!0)},e.prototype.mergeAnimal=function(e,n){if(!(this.animals[e-1][n]>=2))return!1;if(n<this.animals[e-1].length-2)this.animals[e-1][n]-=2,this.animals[e-1][n+1]+=1;else if(n==this.animals[e-1].length-2)return this.animals[e][0]==this.animals[e][this.animals[e].length-1]?!1:(this.animals[e-1][n]-=2,this.animals[e][1]+=1,!0)},e}();__reflect(GameAnimals.prototype,"GameAnimals");var GameEvents=function(){function e(){}return e}();GameEvents.EVT_CLOSE_MONTHCARD="EVT_CLOSE_MONTHCARD",GameEvents.EVT_BUY_MONTHCARD="EVT_BUY_MONTHCARD",GameEvents.EVT_BUY_YEARCARD="EVT_BUY_YEARCARD",GameEvents.EVT_CLOSE_ONEYUAN="EVT_CLOSE_ONEYUAN",GameEvents.EVT_BUY_ONEYUAN="EVT_BUY_ONEYUAN",GameEvents.EVT_CLOSE_MALL="EVT_CLOSE_MALL",GameEvents.EVT_CLOSE_CLASS="EVT_CLOSE_CLASS",GameEvents.EVT_CLOSE_RECRUIT="EVT_CLOSE_RECRUIT",GameEvents.EVT_OPEN_MALL="EVT_OPEN_MALL",__reflect(GameEvents.prototype,"GameEvents");var GamePages=function(){function e(){}return e}();GamePages.RECRUIT="recruit",GamePages.CLASS="class",GamePages.FRIENDS="friends",GamePages.HOME="home",GamePages.CLOTHES="clothes",GamePages.MALL="mall",GamePages.ONEYUAN="oneyuan",GamePages.MONTHCARD="monthcard",GamePages.LUCKYWHEEL="luckywheel",GamePages.TASK="task",GamePages.JIGSAW="jigsaw",GamePages.REDPACKET="redpacket",GamePages.HANDBOOK="handbook",GamePages.HORN="horn",GamePages.ENERGY="energy",GamePages.RANK="rank",GamePages.MAIL="mail",GamePages.SETTING="setting",GamePages.SCENE1=1,GamePages.SCENE2=2,GamePages.SCENE3=3,GamePages.SCENE4=4,GamePages.SCENE5=5,GamePages.SCENE6=6,__reflect(GamePages.prototype,"GamePages");var LoadingUI=function(e){function n(){var n=e.call(this)||this;return n.mProgressBarSkin='<?xml version="1.0" encoding="utf-8"?>\n<e:Skin class="ProgressBar" width="419" height="32" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n	<e:Image source="resource/arts/loading/progressBg.png" x="0" y="0"/>\n	<e:Image id="thumb" source="resource/arts/loading/progressBar.png" x="5" y="5"/>\n</e:Skin>',n.progressBar=new eui.ProgressBar,n.createView(),n}return __extends(n,e),n.prototype.createView=function(){var e=new eui.Image;e.source="resource/arts/loading/loadingBg.jpg",this.addChild(e),e.x=-60,this.progressBar.skinName=this.mProgressBarSkin,this.addChild(this.progressBar),this.progressBar.x=31,this.progressBar.y=614;var n=new eui.Label("正在加载游戏主类...");this.addChild(n),n.x=152,n.y=620,n.size=20;var t=new eui.Label("仅以此作品致敬啪啪动物城原作！");this.addChild(t),t.fontFamily="SimHei",t.size=25,t.x=53,t.y=685,t.stroke=3,t.strokeColor=8015641},n.prototype.setProgress=function(e,n){var t=Math.round(e/n*100);this.progressBar.value=t},n}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isThemeLoadEnd=!1,n.isResourceLoadEnd=!1,n}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this);var n=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",n),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var n=new eui.Theme("resource/default.thm.json",this.stage);n.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},n.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},n.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},n.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.prototype.startCreateScene=function(){this._actionUI=new ActionUI,this.addChild(this._actionUI)},n.prototype.createBitmapByName=function(e){var n=new egret.Bitmap,t=RES.getRes(e);return n.texture=t,n},n}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,n,t,a){function i(e){n.call(a,e)}function o(n){n.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),t.call(a))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);